
<!doctype html>
<html amp lang="en">

<head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.2.js"></script>
    <link rel="shortcut icon" href="https://shotcutdotcom.github.io/static/images/favicon.ico" type="image/png">
    <title>How to Design Amazon&#x27;s sales rank by category feature - Blog - Find Best Reads of All Time on AskGif</title>

    <link rel="canonical" href="https://askgif.com/blog/1689/how-to-design-amazons-sales-rank-by-category-feature/">

    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <script type="application/ld+json">
        {
        "@context": "http://schema.org",
        "@type": "NewsArticle",
        "mainEntityOfPage": "https://askgif.com/",
        "headline": "AskGif",
        "datePublished": "2020/11/20",
        "dateModified":  "2020/11/20",
        "description": "Share this How to Design Amazon&#x27;s sales rank by category feature Blog and explore more",
        "author": {
        "@type": "Person",
        "name": "Sumit Chourasia"
        },
        "publisher": {
        "@type": "Organization",
        "name": "Askgif",
        "logo": {
        "@type": "ImageObject",
        "url": "https://raw.githubusercontent.com/sumitc91/data/master/askgif-static/askgif_logo.png"
        }
        },
        "image": {
        "@type": "ImageObject",
        "url": "https://raw.githubusercontent.com/sumitc91/AmpImage/main/Blogs/6a724e39-5b07-478b-a4ae-af8ecae9210e.jpg",
        "height": 1280,
        "width": 857
        }
        }
    </script>
    <style amp-boilerplate>
        body {
            -webkit-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
            -moz-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
            -ms-animation: -amp-start 8s steps(1, end) 0s 1 normal both;
            animation: -amp-start 8s steps(1, end) 0s 1 normal both
        }

        @-webkit-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @-moz-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @-ms-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @-o-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }
    </style>
    <noscript>
        <style amp-boilerplate>
            body {
                -webkit-animation: none;
                -moz-animation: none;
                -ms-animation: none;
                animation: none
            }
        </style>
    </noscript>
    <style amp-custom=''>
        * {
            box-sizing: border-box;
            font-family: 'Roboto';
            transition: all 0.2s linear;
            font-size: 16px;
        }

        html,
        body {
            margin: 0px;
            padding: 0px;
        }

        .content-width {
            width: 80%;
        }

        .content {
            margin: 0 auto;
            padding: 50px 0px;
            line-height: 160%;
        }

        h1 {
            font-size: 240%;
            line-height: 120%;
            margin: 20px 0px;
        }

        h2 {
            font-size: 140%;
            margin: 30px 0px;
        }

        .clearfix {
            clear: both;
        }

        .subtext {
            text-align: left;
            font-weight: 400;
            color: #a5a5a5;
            font-size: 90%;
        }

        .branding {
            font-size: 90%;
            color: #fff;
        }

            .branding a {
                color: inherit;
            }

                .branding a:hover {
                    color: #19B5FE;
                }

        .button {
            padding: 10px 15px;
            text-decoration: none;
            color: #fff;
            background: #19B5FE;
            font-weight: 700;
            text-align: center;
        }

            .button:hover {
                background: #3ebf43;
            }

        /* Header */
        header,
        footer,
        #sidebar {
            background: #2c3e50;
        }

        header {
            padding: 10px 0px;
            position: sticky;
            top: 0;
            z-index: 999;
        }

        #sidebar {
            width: 300px;
            padding: 1.5rem;
        }

        .sidebar-menu {
            padding: 0px;
            margin: 0px;
        }

        .amp-custom-sidebar-header {
            line-height: 3.5rem;
            min-height: 3.5rem;
            color: #fff;
        }

        #sidebar-close {
            cursor: pointer;
        }

        .sidevar-nav-item {
            padding: 10px 0px;
            margin: 0px;
            display: block;
            list-style: none;
            color: #021425;
            text-transform: capitalize;
            letter-spacing: .6px;
            line-height: 2.0625;
            cursor: pointer;
            text-decoration: none;
            color: #fff;
        }

            .sidevar-nav-item:hover {
                color: #19B5FE;
            }

        .menu {
            display: flex;
            justify-content: space-between;
            margin: 0 auto;
        }

        .logo {
            width: 200px;
        }

        #sidebar-menu-btn {
            background: 0 0;
            border: 0;
            color: #fff;
            font-weight: 700;
            font-size: 28px;
        }

        /* POST */
        #article-wrapper {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
        }

        .article {
            flex-basis: 70%;
            padding-right: 30px;
            border-right: 1px solid #e3e3e3;
        }

            .article h1 {
                margin-top: 0px;
            }

        .article-image,
        .article-body {
            margin: 20px 0px;
            width: 340px;
        }

        .author-info {
            color: #9d9d9d;
            font-weight: bold;
        }

        .article a {
            color: inherit;
        }

        a {
            text-decoration: none;
            color: white;
        }

        pre {
            font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;
            margin-bottom: 10px;
            overflow: auto;
            width: auto;
            padding: 5px;
            background-color: #eee;
            width: 650px !ie7;
            padding-bottom: 20px !ie7;
            max-height: 600px;
        }

        .article a.button {
            margin: 20px 10px 20px 0px;
            display: inline-block;
            width: 120px;
        }

            .article a.button,
            .article a.button:hover {
                color: #fff;
            }

        .article a:hover {
            color: #19B5FE;
        }

        #additional-info {
            flex-basis: 30%;
            padding-left: 30px;
        }

            #additional-info:before {
                display: block;
                height: 6px;
                background-color: #2c3e50;
                content: ' ';
                width: 50px;
                margin-left: 0;
                margin-bottom: 20px;
            }

        .promo,
        .related-box ul li {
            border: 1px solid #e3e3e3;
        }

        .promo {
            padding: 10px;
            margin-top: 20px;
        }

        .article-meta ul,
        .related-box ul {
            padding: 0px;
            margin: 0px;
        }

        .related-box a {
            text-decoration: none;
            color: inherit;
        }

            .related-box a.imp-link {
                color: #3ebf43;
                font-weight: 700;
            }

        .related-box ul li {
            list-style: none;
            padding: 10px;
        }

            .related-box ul li:hover,
            .related-box a:hover {
                text-decoration: underline;
                background: #ebebeb;
            }

        .article-meta {
            margin: 30px 0px;
        }

            .article-meta ul {
                display: flex;
                flex-direction: row;
            }

        .article .article-meta a.tag {
            margin-right: 5px;
            background: #ebebeb;
            font-size: 90%;
            text-decoration: none;
            padding: 5px;
            color: #414141;
            text-transform: uppercase;
        }

        .article .article-meta .tag:hover {
            background: #dadada;
        }

        .article-meta li {
            list-style: none;
        }

        .blockquote-wrapper {
            position: relative;
        }

        .blockquote {
            margin-top: 50px;
            margin-bottom: 50px;
            font-size: 90%;
            font-style: italic;
            text-align: justify;
        }

            .blockquote::before {
                content: "“";
                position: absolute;
                top: 0.25em;
                left: -0.15em;
                color: #e7e6e4;
                font-size: 170px;
                z-index: -1;
            }

        cite {
            display: block;
            text-align: right;
            padding: 10px 0px;
        }

        .amp-components .component {
            margin: 30px 0px;
            position: relative;
            overflow: hidden;
        }

        .color-darkturquoise {
            background-color: darkturquoise;
        }
        /* Footer */
        footer {
            color: #fff;
            text-align: center;
        }

        .article {
            width: 100%;
        }

        #additional-info {
            width: 100%;
        }

        @media only screen and (max-width: 1024px) {
            h1 {
                font-size: 140%;
            }

            .article {
                padding-right: 20px;
            }

            #additional-info {
                padding-left: 20px;
            }

            .related-box ul li, .promo p, .promo a {
                font-size: 90%;
            }
        }

        @media only screen and (max-width: 768px) {
            .article,
            #additional-info {
                border: 0px;
                flex-basis: 100%;
                padding: 0px;
                margin-bottom: 30px;
            }

            .logo {
                width: 160px;
            }

            h1 {
                font-size: 160%;
            }

            .article a.button,
            .article .article-meta a.tag li {
                font-size: 90%;
            }
        }

        @media only screen and (max-width: 600px) {
            h1 {
                font-size: 120%;
            }

            .content-width {
                width: 90%;
            }

            .content {
                padding: 30px 0px;
            }

            .logo {
                width: 140px;
            }

            header {
                padding: 5px 0px;
            }

            #article-wrapper {
                flex-direction: column;
            }

            .blockquote {
                margin: 50px 0px;
                font-size: 100%;
            }

            .article-meta ul {
                flex-wrap: wrap;
            }

            .article-meta a.tag {
                margin-bottom: 10px;
            }

            .article a.button {
                margin: 10px 10px 10px 0px;
            }

            .branding p, .branding a {
                font-size: 14px;
            }
        }
    </style>
     <script async custom-element="amp-auto-ads"
            src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
    <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script> 
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
</head>

<body>
     <amp-auto-ads type="adsense"
                  data-ad-client="ca-pub-1068871795581451">
    </amp-auto-ads> 
    <amp-analytics type="googleanalytics">
        <script type="application/json">
            {
            "vars": {
            "account": "UA-118778979-1"
            },
            "triggers": {
            "trackPageview": {
            "on": "visible",
            "request": "pageview"
            }
            }
            }
        </script>
    </amp-analytics>
    <header>
        <div class="menu content-width">
            <div class="logo">
                <a href="https://askgif.com/">
                    AskGif<sup>TM</sup>
                </a>
            </div>
            <button id="sidebar-menu-btn" on="tap:sidebar.toggle">☰</button>
        </div>
    </header>
    <amp-sidebar id="sidebar" layout="nodisplay" side="right">
        <div class="amp-custom-sidebar-header">
            <div role="button" aria-label="close sidebar" on="tap:sidebar.toggle" tabindex="0" id="sidebar-close">✕</div>
        </div>
        <ul class="sidebar-menu">
            <a href="https://askgif.com/" class="sidevar-nav-item">
                <li>Gifs</li>
            </a>
            <a href="https://askgif.com/blog/" class="sidevar-nav-item">
                <li>Blogs</li>
            </a>
        </ul>
    </amp-sidebar>
    <section class="content content-width" id="article-wrapper">
            <div class="article">
                <a href="/blog/1689/how-to-design-amazons-sales-rank-by-category-feature">
                    <h2 class="title">
                        How to Design Amazon&#x27;s sales rank by category feature
                    </h2>
                </a>

                <div class="author-info">
                    By <a href="">AskGif</a> | Nov 20, 2020
                </div>
                <div class="article-image">
                    <a href="/blog/1689/how-to-design-amazons-sales-rank-by-category-feature/">
                        <amp-img src="https://raw.githubusercontent.com/sumitc91/sumitc91.github.io/master/Blogs/6a724e39-5b07-478b-a4ae-af8ecae9210e.jpg" layout="responsive" width="1484" height="600"></amp-img>
                        <p class="subtext">
                            Source : AskGif
                        </p>
                    </a>
                </div>
                <div class="article-meta">
                    <ul class="tags">
                        <a class="tag" href="/blog/category/tutorials/"><li>tutorials</li></a>
                            <a class="tag" href="/blog/tags/design/"><li>design</li></a>
                            <a class="tag" href="/blog/tags/interview/"><li>interview</li></a>
                            <a class="tag" href="/blog/tags/system-design/"><li>system-design</li></a>
                    </ul>
                </div>
                <div class="article-body">
                    <p><p>Step 1: Outline use cases and constraints<br />Gather requirements and scope the problem. Ask questions to clarify use cases and constraints. Discuss assumptions.</p>
<p>Without an interviewer to address clarifying questions, we'll define some use cases and constraints.</p>
<p>Use cases<br />We'll scope the problem to handle only the following use case<br />Service calculates the past week's most popular products by category<br />User views the past week's most popular products by category<br />Service has high availability<br />Out of scope<br />The general e-commerce site<br />Design components only for calculating sales rank</p>
<p><br />Constraints and assumptions<br />State assumptions<br />Traffic is not evenly distributed<br />Items can be in multiple categories<br />Items cannot change categories<br />There are no subcategories ie foo/bar/baz<br />Results must be updated hourly<br />More popular products might need to be updated more frequently<br />10 million products<br />1000 categories<br />1 billion transactions per month<br />100 billion read requests per month<br />100:1 read to write ratio<br />Calculate usage<br />Clarify with your interviewer if you should run back-of-the-envelope usage calculations.</p>
<p>Size per transaction:<br />created_at - 5 bytes<br />product_id - 8 bytes<br />category_id - 4 bytes<br />seller_id - 8 bytes<br />buyer_id - 8 bytes<br />quantity - 4 bytes<br />total_price - 5 bytes<br />Total: ~40 bytes<br />40 GB of new transaction content per month<br />40 bytes per transaction * 1 billion transactions per month<br />1.44 TB of new transaction content in 3 years<br />Assume most are new transactions instead of updates to existing ones<br />400 transactions per second on average<br />40,000 read requests per second on average<br />Handy conversion guide:</p>
<p>2.5 million seconds per month<br />1 request per second = 2.5 million requests per month<br />40 requests per second = 100 million requests per month<br />400 requests per second = 1 billion requests per month<br />Step 2: Create a high level design<br />Outline a high level design with all important components.</p>
<p>Imgur</p>
<p>Step 3: Design core components<br />Dive into details for each core component.</p>
<p>Use case: Service calculates the past week's most popular products by category<br />We could store the raw Sales API server log files on a managed Object Store such as Amazon S3, rather than managing our own distributed file system.</p>
<p>Clarify with your interviewer how much code you are expected to write.</p>
<p>We'll assume this is a sample log entry, tab delimited:</p>
<p>timestamp &nbsp; product_id &nbsp;category_id &nbsp; &nbsp;qty &nbsp; &nbsp; total_price &nbsp; seller_id &nbsp; &nbsp;buyer_id<br />t1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product1 &nbsp; &nbsp;category1 &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; &nbsp; 20.00 &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1<br />t2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product1 &nbsp; &nbsp;category2 &nbsp; &nbsp; &nbsp;2 &nbsp; &nbsp; &nbsp; 20.00 &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2<br />t2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product1 &nbsp; &nbsp;category2 &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; 10.00 &nbsp; &nbsp; &nbsp; &nbsp; 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3<br />t3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product2 &nbsp; &nbsp;category1 &nbsp; &nbsp; &nbsp;3 &nbsp; &nbsp; &nbsp; &nbsp;7.00 &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4<br />t4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product3 &nbsp; &nbsp;category2 &nbsp; &nbsp; &nbsp;7 &nbsp; &nbsp; &nbsp; &nbsp;2.00 &nbsp; &nbsp; &nbsp; &nbsp; 4 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5<br />t5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;product4 &nbsp; &nbsp;category1 &nbsp; &nbsp; &nbsp;1 &nbsp; &nbsp; &nbsp; &nbsp;5.00 &nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6<br />...<br />The Sales Rank Service could use MapReduce, using the Sales API server log files as input and writing the results to an aggregate table sales_rank in a SQL Database. We should discuss the use cases and tradeoffs between choosing SQL or NoSQL.</p>
<p>We'll use a multi-step MapReduce:</p>
<p>Step 1 - Transform the data to (category, product_id), sum(quantity)<br />Step 2 - Perform a distributed sort<br />class SalesRanker(MRJob):</p>
<p>&nbsp; &nbsp; def within_past_week(self, timestamp):<br />&nbsp; &nbsp; &nbsp; &nbsp; """Return True if timestamp is within past week, False otherwise."""<br />&nbsp; &nbsp; &nbsp; &nbsp; ...</p>
<p>&nbsp; &nbsp; def mapper(self, _ line):<br />&nbsp; &nbsp; &nbsp; &nbsp; """Parse each log line, extract and transform relevant lines.</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; Emit key value pairs of the form:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; (category1, product1), 2<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, product1), 2<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, product1), 1<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, product2), 3<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, product3), 7<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, product4), 1<br />&nbsp; &nbsp; &nbsp; &nbsp; """<br />&nbsp; &nbsp; &nbsp; &nbsp; timestamp, product_id, category_id, quantity, total_price, seller_id, \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buyer_id = line.split('\t')<br />&nbsp; &nbsp; &nbsp; &nbsp; if self.within_past_week(timestamp):<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; yield (category_id, product_id), quantity</p>
<p>&nbsp; &nbsp; def reducer(self, key, value):<br />&nbsp; &nbsp; &nbsp; &nbsp; """Sum values for each key.</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; (category1, product1), 2<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, product1), 3<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, product2), 3<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, product3), 7<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, product4), 1<br />&nbsp; &nbsp; &nbsp; &nbsp; """<br />&nbsp; &nbsp; &nbsp; &nbsp; yield key, sum(values)</p>
<p>&nbsp; &nbsp; def mapper_sort(self, key, value):<br />&nbsp; &nbsp; &nbsp; &nbsp; """Construct key to ensure proper sorting.</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; Transform key and value to the form:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; (category1, 2), product1<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, 3), product1<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, 3), product2<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, 7), product3<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, 1), product4</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; The shuffle/sort step of MapReduce will then do a<br />&nbsp; &nbsp; &nbsp; &nbsp; distributed sort on the keys, resulting in:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; (category1, 1), product4<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, 2), product1<br />&nbsp; &nbsp; &nbsp; &nbsp; (category1, 3), product2<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, 3), product1<br />&nbsp; &nbsp; &nbsp; &nbsp; (category2, 7), product3<br />&nbsp; &nbsp; &nbsp; &nbsp; """<br />&nbsp; &nbsp; &nbsp; &nbsp; category_id, product_id = key<br />&nbsp; &nbsp; &nbsp; &nbsp; quantity = value<br />&nbsp; &nbsp; &nbsp; &nbsp; yield (category_id, quantity), product_id</p>
<p>&nbsp; &nbsp; def reducer_identity(self, key, value):<br />&nbsp; &nbsp; &nbsp; &nbsp; yield key, value</p>
<p>&nbsp; &nbsp; def steps(self):<br />&nbsp; &nbsp; &nbsp; &nbsp; """Run the map and reduce steps."""<br />&nbsp; &nbsp; &nbsp; &nbsp; return [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.mr(mapper=self.mapper,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reducer=self.reducer),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; self.mr(mapper=self.mapper_sort,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reducer=self.reducer_identity),<br />&nbsp; &nbsp; &nbsp; &nbsp; ]<br />The result would be the following sorted list, which we could insert into the sales_rank table:</p>
<p>(category1, 1), product4<br />(category1, 2), product1<br />(category1, 3), product2<br />(category2, 3), product1<br />(category2, 7), product3<br />The sales_rank table could have the following structure:</p>
<p>id int NOT NULL AUTO_INCREMENT<br />category_id int NOT NULL<br />total_sold int NOT NULL<br />product_id int NOT NULL<br />PRIMARY KEY(id)<br />FOREIGN KEY(category_id) REFERENCES Categories(id)<br />FOREIGN KEY(product_id) REFERENCES Products(id)<br />We'll create an index on id , category_id, and product_id to speed up lookups (log-time instead of scanning the entire table) and to keep the data in memory. Reading 1 MB sequentially from memory takes about 250 microseconds, while reading from SSD takes 4x and from disk takes 80x longer.1</p>
<p>Use case: User views the past week's most popular products by category<br />The Client sends a request to the Web Server, running as a reverse proxy<br />The Web Server forwards the request to the Read API server<br />The Read API server reads from the SQL Database sales_rank table<br />We'll use a public REST API:</p>
<p>$ curl https://amazon.com/api/v1/popular?category_id=1234<br />Response:</p>
<p>{<br />&nbsp; &nbsp; "id": "100",<br />&nbsp; &nbsp; "category_id": "1234",<br />&nbsp; &nbsp; "total_sold": "100000",<br />&nbsp; &nbsp; "product_id": "50",<br />},<br />{<br />&nbsp; &nbsp; "id": "53",<br />&nbsp; &nbsp; "category_id": "1234",<br />&nbsp; &nbsp; "total_sold": "90000",<br />&nbsp; &nbsp; "product_id": "200",<br />},<br />{<br />&nbsp; &nbsp; "id": "75",<br />&nbsp; &nbsp; "category_id": "1234",<br />&nbsp; &nbsp; "total_sold": "80000",<br />&nbsp; &nbsp; "product_id": "3",<br />},<br />For internal communications, we could use Remote Procedure Calls.</p>
<p>Step 4: Scale the design<br />Identify and address bottlenecks, given the constraints.</p>
<p>Imgur</p>
<p>Important: Do not simply jump right into the final design from the initial design!</p>
<p>State you would 1) Benchmark/Load Test, 2) Profile for bottlenecks 3) address bottlenecks while evaluating alternatives and trade-offs, and 4) repeat. See Design a system that scales to millions of users on AWS as a sample on how to iteratively scale the initial design.</p>
<p>It's important to discuss what bottlenecks you might encounter with the initial design and how you might address each of them. For example, what issues are addressed by adding a Load Balancer with multiple Web Servers? CDN? Master-Slave Replicas? What are the alternatives and Trade-Offs for each?</p>
<p>We'll introduce some components to complete the design and to address scalability issues. Internal load balancers are not shown to reduce clutter.</p>
<p>To avoid repeating discussions, refer to the following system design topics for main talking points, tradeoffs, and alternatives:</p>
<p>DNS<br />CDN<br />Load balancer<br />Horizontal scaling<br />Web server (reverse proxy)<br />API server (application layer)<br />Cache<br />Relational database management system (RDBMS)<br />SQL write master-slave failover<br />Master-slave replication<br />Consistency patterns<br />Availability patterns<br />The Analytics Database could use a data warehousing solution such as Amazon Redshift or Google BigQuery.</p>
<p>We might only want to store a limited time period of data in the database, while storing the rest in a data warehouse or in an Object Store. An Object Store such as Amazon S3 can comfortably handle the constraint of 40 GB of new content per month.</p>
<p>To address the 40,000 average read requests per second (higher at peak), traffic for popular content (and their sales rank) should be handled by the Memory Cache instead of the database. The Memory Cache is also useful for handling the unevenly distributed traffic and traffic spikes. With the large volume of reads, the SQL Read Replicas might not be able to handle the cache misses. We'll probably need to employ additional SQL scaling patterns.</p>
<p>400 average writes per second (higher at peak) might be tough for a single SQL Write Master-Slave, also pointing to a need for additional scaling techniques.</p>
<p>SQL scaling patterns include:</p>
<p>Federation<br />Sharding<br />Denormalization<br />SQL Tuning<br />We should also consider moving some data to a NoSQL Database.</p></p>
                     <amp-ad width="100vw" height="320"
                            type="adsense"
                            data-ad-client="ca-pub-1068871795581451"
                            data-ad-slot="7001708883"
                            data-auto-format="rspv"
                            data-full-width="">
                        <div overflow=""></div>
                    </amp-ad> 

                     <amp-ad width="100vw" height="320"
                            type="adsense"
                            data-ad-client="ca-pub-1068871795581451"
                            data-ad-slot="7001708883"
                            data-auto-format="rspv"
                            data-full-width="">
                        <div overflow=""></div>
                    </amp-ad> 
                </div>
            </div>

        <div class="article">
            <div class="article-meta">
                <ul class="tags">
                </ul>

            </div>
        </div>

        <div id="additional-info">
                <div class="related-box promo">
                    <a href="/blog/53/how-to-find-maximum-value-contiguous-subsequence/">
                        <amp-img src="https://raw.githubusercontent.com/sumitc91/sumitc91.github.io/master/Blogs/8a4e1acc-7d87-4759-81e9-b9987ddc13c8_max-subarray.jpg" layout="responsive" width="1484" height="600"></amp-img>
                    </a>
                    <p><a href="/blog/53/how-to-find-maximum-value-contiguous-subsequence/">How to Find Maximum Value Contiguous Subsequence?</a></p>
                </div>
                <div class="related-box promo">
                    <a href="/blog/69/what-is-adapter-pattern/">
                        <amp-img src="https://raw.githubusercontent.com/sumitc91/sumitc91.github.io/master/Blogs/d3a5fc87-6928-4196-b3ae-d8e4ed5b9811_adapter-pattern.jpg" layout="responsive" width="1484" height="600"></amp-img>
                    </a>
                    <p><a href="/blog/69/what-is-adapter-pattern/">What is Adapter pattern?</a></p>
                </div>
                <div class="related-box promo">
                    <a href="/blog/76/what-is-proxy-pattern/">
                        <amp-img src="https://raw.githubusercontent.com/sumitc91/sumitc91.github.io/master/Blogs/aaeafdf4-c3d7-4245-809f-7be5d5a4ac59_Proxy_Pattern.jpg" layout="responsive" width="1484" height="600"></amp-img>
                    </a>
                    <p><a href="/blog/76/what-is-proxy-pattern/">What is Proxy pattern?</a></p>
                </div>
                <div class="related-box promo">
                    <a href="/blog/1693/availability-vs-consistency/">
                        <amp-img src="https://raw.githubusercontent.com/sumitc91/sumitc91.github.io/master/Blogs/icon_a22695c8-b2d8-4ca6-8546-265c07e566d7.png" layout="responsive" width="1484" height="600"></amp-img>
                    </a>
                    <p><a href="/blog/1693/availability-vs-consistency/">Availability vs consistency</a></p>
                </div>
             <amp-ad width="100vw" height="320"
                    type="adsense"
                    data-ad-client="ca-pub-1068871795581451"
                    data-ad-slot="7001708883"
                    data-auto-format="rspv"
                    data-full-width="">
                <div overflow=""></div>
            </amp-ad> 

            <div class="related-box">
                <h3>Categories</h3>
                <ul>
                </ul>
            </div>
            <div class="related-box promo">
                 <amp-ad width="100vw" height="320"
                        type="adsense"
                        data-ad-client="ca-pub-1068871795581451"
                        data-ad-slot="7001708883"
                        data-auto-format="rspv"
                        data-full-width="">
                    <div overflow=""></div>
                </amp-ad> 
            </div>
        </div>
    </section>

    <footer>
        <div class="content content-width">
            <div class="footer-menu">
                <div class="footer-item">
                    <h2>About AskGif</h2>
                    <p>
                        AskGif is an honest to GOD approach to bring little smile on the tense faces. Make sure to play your part in our mission
                        to make people smile. Keep smiling and keep sharing
                    </p><br>
                    <a href="https://askgif.com/about-us/">Read More</a>
                </div>
                <div class="footer-item">
                    <h2>Sarkari Support &amp; Help</h2>
                    <ul>
                        <li><a href="https://askgif.com/faq/">FAQs</a></li>
                        <li>Have Questions? Email us @ support[at]askgif[dot]com</li>
                    </ul>
                </div>
                <div class="footer-item">
                    <h2>Follow us</h2>
                    <p>Adhe Idhar Jao Adhe Udhar Jao</p>
                    <p>Baki hamare piche ao</p>
                </div>
                <div class="footer-item">
                    <h2>Quick Links</h2>
                    <ul>
                        <li><a href="https://askgif.com/?lang=en">English</a></li>
                        <li><a href="https://askgif.com/?lang=hi">हिंदी</a></li>
                        <li><a href="https://askgif.com/terms-of-service/">Terms of Service</a></li>
                        <li><a href="https://askgif.com/privacy-policy/">Privacy Policy</a></li>
                        <li><a href="https://askgif.com/editor/">Editor</a></li>
                        <li><a href="https://askgif.com/contributors/">Developers & Contributors</a></li>
                        <li><a href="https://askgif.com/sitemap.xml">Site Map</a></li>
                    </ul>
                </div>
            </div>
            <div class="social">
                <ul>
                    <li><a rel="ugc nofollow" href="https://www.facebook.com/askgifdotcom/"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a rel="ugc nofollow" href="https://twitter.com/askgifdotcom"><i class="fab fa-twitter"></i></a></li>
                    <li><a rel="ugc nofollow" href="https://www.pinterest.com/askgifdotcom/"><i class="fab fa-pinterest"></i></a></li>
                    <li><a rel="ugc nofollow" href="https://www.instagram.com/askgifdotcom/"><i class="fab fa-instagram"></i></a></li>
                    <li><a rel="ugc nofollow" href="https://www.tumblr.com/blog/askgifdotcom"><i class="fab fa-tumblr"></i></a></li>
                </ul>
            </div>

            <div class="meta-content">
                <p>Copyright 2021 | Designed by <a href="https://askgif.com/">Askgif</a> | Last Cached: 10/30/2021 9:42:29 AM | A</p>
            </div>
        </div>
    </footer>
</body>

</html>

